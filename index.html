<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>EDIN – Score automatique</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body{font-family:Arial,sans-serif;background:#f6f7f9;margin:0;padding:20px;color:#111}
  .page{max-width:1050px;margin:auto;background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}
  .badge{display:inline-block;padding:6px 12px;border-radius:999px;background:#eee;margin-right:8px;font-size:14px}
  h1{margin:10px 0 6px 0}
  .subtitle{opacity:.8;margin:0 0 16px 0}
  .desc{font-size:14px;opacity:.88;line-height:1.4}
  .row{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin:16px 0}
  .box{border:1px solid #e6e6e6;border-radius:12px;padding:14px;background:#fff}
  .box .label{font-size:13px;opacity:.75;margin-bottom:6px}
  .box .value{font-size:30px;font-weight:800}
  .alert{color:#b00020;font-weight:800}
  .ok{color:#1a7f37;font-weight:800}
  table{width:100%;border-collapse:collapse;margin-top:14px}
  th,td{border:1px solid #ddd;padding:10px;vertical-align:top}
  th{background:#f0f0f0;text-align:left}
  .opts{display:grid;gap:6px}
  label.opt{display:flex;gap:8px;align-items:flex-start;border:1px solid #eee;border-radius:10px;padding:8px;background:#fafafa;cursor:pointer}
  label.opt input{margin-top:3px}
  .actions{margin:12px 0;display:flex;gap:10px;flex-wrap:wrap}
  button{padding:10px 12px;border-radius:10px;border:1px solid #ddd;background:#fff;cursor:pointer}
  input[type="text"]{width:100%;padding:10px;border:1px solid #ddd;border-radius:10px}
  textarea{width:100%;min-height:90px;padding:10px;border:1px solid #ddd;border-radius:10px;resize:vertical}
  .small{font-size:13px;opacity:.85}
  @media print{.actions{display:none}body{background:#fff}}
</style>
</head>

<body>
<div class="page">
  <span class="badge">Douleur prolongée</span>
  <span class="badge">EDIN</span>

  <h1>Échelle EDIN</h1>
  <p class="subtitle">Douleur / inconfort prolongé du nouveau-né — score automatique</p>

  <p class="desc">
    Score <strong>0 à 15</strong> (5 items cotés 0–3). <strong>Seuil de traitement : 5</strong>. :contentReference[oaicite:1]{index=1}
  </p>

  <div class="row">
    <div class="box">
      <div class="label">Date</div>
      <input type="text" placeholder="JJ/MM/AAAA">
    </div>
    <div class="box">
      <div class="label">Heure</div>
      <input type="text" placeholder="HH:MM">
    </div>
  </div>

  <div class="row">
    <div class="box">
      <div class="label">Score total EDIN (0–15)</div>
      <div class="value" id="score">—</div>
      <div class="small" id="need">Coche 1 réponse dans chaque item.</div>
    </div>
    <div class="box">
      <div class="label">Interprétation</div>
      <div class="desc" id="interp">—</div>
      <div class="small">Seuil = 5</div>
    </div>
  </div>

  <div class="actions">
    <button type="button" id="resetBtn">Réinitialiser</button>
    <button type="button" onclick="window.print()">Imprimer</button>
  </div>

  <table>
    <thead>
      <tr><th>Item</th><th>Choix (0 à 3)</th></tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>

  <div class="row" style="margin-top:16px">
    <div class="box">
      <div class="label">Observations</div>
      <textarea placeholder="Contexte, soins, traitements, remarques…"></textarea>
    </div>
  </div>

  <p class="desc" style="margin-top:14px">
    Réf EDIN (Debillon et al.). :contentReference[oaicite:2]{index=2}
  </p>
</div>

<script>
  // ⚠️ Si tu veux que le texte colle mot pour mot à ton PDF, dis-moi et je te l’aligne ligne à ligne.
  const items = [
    { id:"visage",   title:"VISAGE",   options:[
      ["0","Détendu"],
      ["1","Grimaces passagères"],
      ["2","Grimaces fréquentes / marquées"],
      ["3","Crispation permanente / visage prostré"]
    ]},
    { id:"corps",    title:"CORPS",    options:[
      ["0","Détendu"],
      ["1","Agitation transitoire"],
      ["2","Agitation fréquente"],
      ["3","Agitation permanente / raideur / figé"]
    ]},
    { id:"sommeil",  title:"SOMMEIL",  options:[
      ["0","S’endort facilement / sommeil calme"],
      ["1","S’endort difficilement"],
      ["2","Réveils fréquents / sommeil agité"],
      ["3","Pas de sommeil"]
    ]},
    { id:"relation", title:"RELATION", options:[
      ["0","Relation possible / sourire-réponse"],
      ["1","Appréhension passagère au contact"],
      ["2","Contact difficile / cri à la stimulation"],
      ["3","Refus du contact / aucune relation possible"]
    ]},
    { id:"reconfort",title:"RECONFORT",options:[
      ["0","N’a pas besoin de réconfort"],
      ["1","Se calme rapidement"],
      ["2","Se calme difficilement"],
      ["3","Inconsolable"]
    ]},
  ];

  const tbody = document.getElementById("tbody");

  function render(){
    tbody.innerHTML = items.map(it => `
      <tr>
        <td><strong>${it.title}</strong></td>
        <td class="opts">
          ${it.options.map(([v,txt]) => `
            <label class="opt">
              <input type="radio" name="${it.id}" value="${v}">
              <strong>${v}</strong> – ${txt}
            </label>
          `).join("")}
        </td>
      </tr>
    `).join("");
  }

  function getVal(name){
    const el = document.querySelector(`input[name="${name}"]:checked`);
    return el ? parseInt(el.value, 10) : null;
  }

  function calc(){
    const vals = items.map(it => getVal(it.id));
    const scoreEl = document.getElementById("score");
    const needEl  = document.getElementById("need");
    const interpEl= document.getElementById("interp");

    if (vals.some(v => v === null)){
      scoreEl.textContent = "—";
      needEl.textContent  = "Coche 1 réponse dans chaque item.";
      interpEl.textContent= "—";
      return;
    }

    const total = vals.reduce((a,b)=>a+b,0);
    scoreEl.textContent = String(total);
    needEl.textContent  = "Score calculé automatiquement.";

    interpEl.innerHTML = (total >= 5)
      ? `<span class="alert">≥ 5 : seuil de traitement</span>`
      : `<span class="ok">&lt; 5</span>`;
  }

  function resetAll(){
    document.querySelectorAll('input[type="radio"]:checked').forEach(r => r.checked = false);
    calc();
    window.scrollTo({top:0,behavior:"smooth"});
  }

  document.addEventListener("change", (e) => {
    if (e.target && e.target.matches('input[type="radio"]')) calc();
  });

  document.getElementById("resetBtn").addEventListener("click", resetAll);

  render();
  calc();
</script>
</body>
</html>
